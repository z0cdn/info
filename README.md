# info
about

```
配置与控制中心
  - 策略配置 (流控/WAF)
  - 健康检查与权重评估
  - 实时监控与调度决策
         │
         ▼
智能 DNS 系统
  - 地域/IP/运营商解析策略
  - A/AAAA/CNAME 动态返回
  - TTL 控制 + 灰度支持
         │
         ├──────────────┐
         ▼              ▼
北部边缘节点      南部边缘节点
hickory-server    hickory-server
         │              │
         ▼              ▼
北部边缘网关 (L7)   南部边缘网关 (L7)
  - 请求分流/重定向     - 请求分流/熔断
  - WAF/限流/eBPF      - QPS/延迟评估
  - 插件系统/Sidecar    - 插件系统/Sidecar
         │              │
   ┌─────┴─────┐    ┌───┴──────┐
   ▼           ▼    ▼          ▼
北部缓存系统    南部缓存系统
  - 静态/动态资源缓存   - 热点数据缓存
  - 缓存淘汰与同步策略  - 回源请求管理
         │              │
         │              │
         ▼              ▼
北部后端服务     南部后端服务
  - 业务处理       - 数据存储
  - 日志上报       - API 接口

```


明白！这是你这套自研 CDN 的**系统架构文字版说明（系统划分和组成）**，重点描述各系统模块及其职责：

---

# 自研 CDN 系统架构 — 系统划分说明

### 1. 配置与控制中心

* 负责全局策略配置与管理，支持流控规则、WAF 策略设定
* 健康检查与节点权重评估，保障系统高可用
* 实时监控与智能调度决策，动态调整流量分配和服务质量

### 2. 智能 DNS 系统

* 根据地域、IP 段、运营商等多维度策略，智能返回最优节点 IP
* 支持 A / AAAA / CNAME 记录动态返回和 TTL 控制
* 支持灰度发布和流量分片策略，实现平滑更新和测试

### 3. 边缘节点（hickory-server）

* 部署在不同地理区域（如北部、南部）
* 负责接收 DNS 调度下发的请求初始 IP
* 作为第一层流量入口，快速响应区域流量

### 4. 边缘网关 (L7 代理)

* 位于边缘节点后端，作为 L7 代理层
* 实现请求分流、重定向、熔断等流量控制功能
* 内置 WAF、限流、缓存穿透防护、eBPF 流量采集插件
* 支持 Sidecar 模式插件，灵活扩展功能
* 负责将请求转发至缓存系统或回源至后端服务

### 5. 缓存系统

* 独立部署，与边缘网关分离
* 负责静态和动态资源的缓存管理
* 实现缓存淘汰、同步及热点缓存策略
* 当缓存命中，直接返回结果给网关
* 当缓存未命中，发起回源请求至边缘网关，间接访问后端服务，并缓存响应

### 6. 后端服务

* 真正的业务处理节点
* 提供动态接口、业务逻辑、数据存储、日志上报等核心服务
* 边缘网关回源请求时的目标服务端

---



<img width="592" height="752" alt="cdn_architecture_fixed" src="https://github.com/user-attachments/assets/59617871-6681-40d1-9f65-f49cb37fc8c2" />



<img width="880" height="641" alt="9267b2380ab7a50b2a8a3f7f7228f0a0" src="https://github.com/user-attachments/assets/2cfe1748-d56b-41c5-b2fd-0bd11ed61635" />
